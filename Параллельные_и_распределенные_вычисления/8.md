```
Параллельные и распределенные вычисления.
```
**Удаленные объекты, клиенты и серверы**

**Удаленные объекты**

Удаленные объекты требуются для распределённых вычислений, объект, вызываемый с другой
системы, называется объектом System.MarshalByRefObject и соответствуют домену приложения, в
котором они создаются. Чтобы увидеть .Net Remoting, создадим библиотеку классов для
удаленного объекта. Класс Hello будет выводиться из System.MarshalByRefObject, в конструкторе и
деструкторе на консоли, записывается сообщение, чтобы было известно о времени жизни объекта

Например создадим класс Greeting, который будет вызываться от клиента, присвоим сборке имя
RemoteHello.dll, а классу соответственно Hello, типа проекта VisualStudio .Net, используемым для
этого класса, является Visual C# Class Library

```
using System;

namespace MyProgram

{

public class Hello : System.MarshalByRefObject {

public Hello() {

Console.WriteLine(“Объект создан”);

}

~Hello() {

Console.WriteLine(“Объект уничтожен”);

}

public string Greeting(string name) {

return “Привет, “ + name;

}

}

}
```
Для сервера используется консольное приложение C#, для применения класса TCPServerChannel,
необходимо сослаться на сборку System.Runtime.Remoting.dll, так же подключаем RemoteHello.dll,
в методе main, создается объект System.Runtime.Remoting.Chanel.TCP.TCPServerChannel, создается
объект с портом 8086, этот канал регистрируется в классе
System.Runtime.Remoting.Chanels.ChannelServices, чтобы сделать его доступным для удаленных
объектов, тип удаленного объекта регистрируется с помощью
System.Runtime.Remoting.RemotingConfiguration.RequesterWellKnownServiceType, здесь
определяется тип класс в удаленном объекте, используемый клиентом url и режим доступа.
Режим WellKnownObject.SingleCall, означает что для каждого вызова метода создается новый
экземпляр, т.е. мы не храним состояние в удаленном объекте, после регистрации удаленного
объекта, продолжим выполнение сервера, пока не будет нажата клавиша.

```
using System;

using System.Runtime.Remoting;

using System.Runtime.Remoting.Channels;

using System.Runtime.Remoting.Channels.TCP;

namespace MyProgram {

public class HelloServer {

public static void main(string[] args) {

TCPServerChanel channel = new TCPServerChannel(8086);

ChannelServices.RegisterChannel(channel);

RemotingConfiguration.RegisterWellKnownServiceType(typeof(Hello), “Hi”,

WellKnownObjectModel.SingleCall);

System.Console.ReadLine();

}

}
```

[< Previous](7.md) | [Next >](9.md)